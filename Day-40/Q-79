#include <stdio.h>
void reverse(int arr[], int size) {
    for(int i = 0; i < size / 2; i++) {
        int temp = arr[i];
        arr[i] = arr[size - 1 - i];
        arr[size - 1 - i] = temp;
    }
}
int main() {
    int m, n;
    printf("Enter the number of rows: ");
    scanf("%d", &m);
    printf("Enter the number of columns: ");
    scanf("%d", &n);
    int matrix[m][n];
    printf("Enter the matrix elements:\n");
    for(int i = 0; i < m; i++) {
        for(int j = 0; j < n; j++) {
            scanf("%d", &matrix[i][j]);
        }
    }
    for(int sum = 0; sum < m + n - 1; sum++) {
        int low = (sum < n) ? 0 : sum - n + 1;
        low = (low > 0) ? low : 0; 
        int high = (sum < m) ? sum : m - 1;  
        int count = high - low + 1; 
        int arr[count];
        int idx = 0;
        for(int i = low; i <= high; i++) {
            int j = sum - i;
            arr[idx++] = matrix[i][j];
        }
        if(sum % 2 == 1) {
            reverse(arr, count);
        }
        for(int k = 0; k < count; k++) {
            printf("%d ", arr[k]);
        }
    }
    printf("\n"); 
    return 0;
}
